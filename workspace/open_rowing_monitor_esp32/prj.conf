# ==============================================================================
#  ROWING MACHINE PHYSICS & HARDWARE SETUP
#  (Edit these values to match your specific rowing machine)
# ==============================================================================

# 1. Flywheel Configuration
# Number of magnets on the flywheel
CONFIG_ORM_IMPULSES_PER_REV=1
# Moment of Inertia in kg*m^2 (scaled x10000). Example: 5000 = 0.5 kg*m^2
CONFIG_ORM_FLYWHEEL_INERTIA_X10000=5000

# 2. Timing & Noise Filtering (Microsecond precision scaled x10000)
# Minimum time between magnets (0.014s). Filters switch bounce.
CONFIG_ORM_MIN_TIME_BETWEEN_IMPULSE_X10000=140
# Maximum time allowed (3.5s). Slower than this is considered a stop.
CONFIG_ORM_MAX_TIME_BETWEEN_IMPULSE_X10000=35000
# Pause detection timeout (3.0s)
CONFIG_ORM_MAX_IMPULSE_TIME_BEFORE_PAUSE_X10000=30000

# 3. Stroke Phase Detection
# Minimum drive time (0.3s)
CONFIG_ORM_MIN_DRIVE_TIME_X10000=3000
# Minimum recovery time (1.2s)
CONFIG_ORM_MIN_RECOVERY_TIME_X10000=12000
# Flank length: Number of samples to confirm a phase change
CONFIG_ORM_FLANK_LENGTH=4

# 4. Drag Factor (Air Resistance)
# Enable automatic calculation based on deceleration?
CONFIG_ORM_AUTO_ADJUST_DRAG_FACTOR=y
# Smoothing: Average drag over this many strokes
CONFIG_ORM_DAMPING_CONSTANT_SMOOTING=5
# Static Drag Factor (used if Auto-Adjust is OFF, or as initial value)
CONFIG_ORM_DRAG_FACTOR=1500

# ==============================================================================
#  ZEPHYR SYSTEM CONFIGURATION
# ==============================================================================

# Core C++ Support
CONFIG_CPP=y
CONFIG_STD_CPP17=y
CONFIG_GLIBCXX_LIBCPP=y
CONFIG_NEWLIB_LIBC=y

# Floating Point Unit
CONFIG_FPU=y

# System Memory & Logging
CONFIG_MAIN_STACK_SIZE=4096
CONFIG_LOG=y
CONFIG_LOG_MODE_IMMEDIATE=y
CONFIG_LOG_MODE_DEFERRED=y
CONFIG_LOG_BUFFER_SIZE=2048

# Bluetooth Low Energy
CONFIG_BT=y
CONFIG_BT_PERIPHERAL=y
CONFIG_BT_DEVICE_NAME="Rowing-Monitor"
CONFIG_BT_DEVICE_APPEARANCE=833

# Bluetooth Performance & Buffers
CONFIG_BT_GATT_DYNAMIC_DB=y
CONFIG_BT_L2CAP_TX_MTU=247
CONFIG_BT_BUF_ACL_TX_SIZE=251
CONFIG_BT_L2CAP_TX_BUF_COUNT=10
CONFIG_BT_BUF_ACL_TX_COUNT=10
CONFIG_BT_BUF_EVT_RX_COUNT=11
CONFIG_BT_PERIPHERAL_PREF_MIN_INT=24
CONFIG_BT_PERIPHERAL_PREF_MAX_INT=40

# Connectivity Limits
CONFIG_BT_MAX_CONN=2
CONFIG_BT_MAX_PAIRED=2
CONFIG_BT_CONN_CHECK_NULL_BEFORE_CREATE=y
